2024-02-14 15:59:34.583 [ERR] Failed executing DbCommand (58ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p13='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (DbType = Int32), @p40='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (DbType = DateTime2), @p27='?' (DbType = Decimal), @p28='?' (DbType = Decimal), @p29='?' (DbType = Boolean), @p30='?' (DbType = Boolean), @p31='?' (DbType = Boolean), @p32='?' (Size = 4000), @p33='?' (Size = 4000), @p34='?' (Size = 4000), @p35='?' (Size = 4000), @p36='?' (DbType = DateTime2), @p37='?' (DbType = DateTime2), @p38='?' (Size = 4000), @p39='?' (Size = 4000), @p57='?' (DbType = Int32), @p41='?' (Size = 4000), @p42='?' (Size = 4000), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Decimal), @p45='?' (DbType = Decimal), @p46='?' (DbType = Boolean), @p47='?' (DbType = Boolean), @p48='?' (DbType = Boolean), @p49='?' (Size = 4000), @p50='?' (Size = 4000), @p51='?' (Size = 4000), @p52='?' (Size = 4000), @p53='?' (DbType = DateTime2), @p54='?' (DbType = DateTime2), @p55='?' (Size = 4000), @p56='?' (Size = 4000), @p74='?' (DbType = Int32), @p58='?' (Size = 4000), @p59='?' (Size = 4000), @p60='?' (DbType = DateTime2), @p61='?' (DbType = Decimal), @p62='?' (DbType = Decimal), @p63='?' (DbType = Boolean), @p64='?' (DbType = Boolean), @p65='?' (DbType = Boolean), @p66='?' (Size = 4000), @p67='?' (Size = 4000), @p68='?' (Size = 4000), @p69='?' (Size = 4000), @p70='?' (DbType = DateTime2), @p71='?' (DbType = DateTime2), @p72='?' (Size = 4000), @p73='?' (Size = 4000), @p91='?' (DbType = Int32), @p75='?' (Size = 4000), @p76='?' (Size = 4000), @p77='?' (DbType = DateTime2), @p78='?' (DbType = Decimal), @p79='?' (DbType = Decimal), @p80='?' (DbType = Boolean), @p81='?' (DbType = Boolean), @p82='?' (DbType = Boolean), @p83='?' (Size = 4000), @p84='?' (Size = 4000), @p85='?' (Size = 4000), @p86='?' (Size = 4000), @p87='?' (DbType = DateTime2), @p88='?' (DbType = DateTime2), @p89='?' (Size = 4000), @p90='?' (Size = 4000), @p108='?' (DbType = Int32), @p92='?' (Size = 4000), @p93='?' (Size = 4000), @p94='?' (DbType = DateTime2), @p95='?' (DbType = Decimal), @p96='?' (DbType = Decimal), @p97='?' (DbType = Boolean), @p98='?' (DbType = Boolean), @p99='?' (DbType = Boolean), @p100='?' (Size = 4000), @p101='?' (Size = 4000), @p102='?' (Size = 4000), @p103='?' (Size = 4000), @p104='?' (DbType = DateTime2), @p105='?' (DbType = DateTime2), @p106='?' (Size = 4000), @p107='?' (Size = 4000), @p125='?' (DbType = Int32), @p109='?' (Size = 4000), @p110='?' (Size = 4000), @p111='?' (DbType = DateTime2), @p112='?' (DbType = Decimal), @p113='?' (DbType = Decimal), @p114='?' (DbType = Boolean), @p115='?' (DbType = Boolean), @p116='?' (DbType = Boolean), @p117='?' (Size = 4000), @p118='?' (Size = 4000), @p119='?' (Size = 4000), @p120='?' (Size = 4000), @p121='?' (DbType = DateTime2), @p122='?' (DbType = DateTime2), @p123='?' (Size = 4000), @p124='?' (Size = 4000), @p142='?' (DbType = Int32), @p126='?' (Size = 4000), @p127='?' (Size = 4000), @p128='?' (DbType = DateTime2), @p129='?' (DbType = Decimal), @p130='?' (DbType = Decimal), @p131='?' (DbType = Boolean), @p132='?' (DbType = Boolean), @p133='?' (DbType = Boolean), @p134='?' (Size = 4000), @p135='?' (Size = 4000), @p136='?' (Size = 4000), @p137='?' (Size = 4000), @p138='?' (DbType = DateTime2), @p139='?' (DbType = DateTime2), @p140='?' (Size = 4000), @p141='?' (Size = 4000), @p159='?' (DbType = Int32), @p143='?' (Size = 4000), @p144='?' (Size = 4000), @p145='?' (DbType = DateTime2), @p146='?' (DbType = Decimal), @p147='?' (DbType = Decimal), @p148='?' (DbType = Boolean), @p149='?' (DbType = Boolean), @p150='?' (DbType = Boolean), @p151='?' (Size = 4000), @p152='?' (Size = 4000), @p153='?' (Size = 4000), @p154='?' (Size = 4000), @p155='?' (DbType = DateTime2), @p156='?' (DbType = DateTime2), @p157='?' (Size = 4000), @p158='?' (Size = 4000), @p176='?' (DbType = Int32), @p160='?' (Size = 4000), @p161='?' (Size = 4000), @p162='?' (DbType = DateTime2), @p163='?' (DbType = Decimal), @p164='?' (DbType = Decimal), @p165='?' (DbType = Boolean), @p166='?' (DbType = Boolean), @p167='?' (DbType = Boolean), @p168='?' (Size = 4000), @p169='?' (Size = 4000), @p170='?' (Size = 4000), @p171='?' (Size = 4000), @p172='?' (DbType = DateTime2), @p173='?' (DbType = DateTime2), @p174='?' (Size = 4000), @p175='?' (Size = 4000), @p193='?' (DbType = Int32), @p177='?' (Size = 4000), @p178='?' (Size = 4000), @p179='?' (DbType = DateTime2), @p180='?' (DbType = Decimal), @p181='?' (DbType = Decimal), @p182='?' (DbType = Boolean), @p183='?' (DbType = Boolean), @p184='?' (DbType = Boolean), @p185='?' (Size = 4000), @p186='?' (Size = 4000), @p187='?' (Size = 4000), @p188='?' (Size = 4000), @p189='?' (DbType = DateTime2), @p190='?' (DbType = DateTime2), @p191='?' (Size = 4000), @p192='?' (Size = 4000), @p210='?' (DbType = Int32), @p194='?' (Size = 4000), @p195='?' (Size = 4000), @p196='?' (DbType = DateTime2), @p197='?' (DbType = Decimal), @p198='?' (DbType = Decimal), @p199='?' (DbType = Boolean), @p200='?' (DbType = Boolean), @p201='?' (DbType = Boolean), @p202='?' (Size = 4000), @p203='?' (Size = 4000), @p204='?' (Size = 4000), @p205='?' (Size = 4000), @p206='?' (DbType = DateTime2), @p207='?' (DbType = DateTime2), @p208='?' (Size = 4000), @p209='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DiscrepancyOrders] ([boxId], [createdBy], [dateCreated], [module], [orderId], [referenceNo], [skuId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [id]
FROM [DiscrepancyOrders]
WHERE @@ROWCOUNT = 1 AND [id] = scope_identity();

UPDATE [DiscrepancyReportHdr] SET [boxerUser] = @p7, [dateProcess] = @p8, [orderId] = @p9, [pickerUser] = @p10, [referenceNo] = @p11, [status] = @p12
WHERE [discrepancyId] = @p13;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p14;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p15;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p16;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p17;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p18;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p19;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p20;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p21;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p22;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p23;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p24, [boxQRCode] = @p25, [dateProcess] = @p26, [deductedStock2017] = @p27, [deductedStockEcom] = @p28, [isFreeItem] = @p29, [isFromNIB] = @p30, [isNIB] = @p31, [module] = @p32, [orderId] = @p33, [pickerStatus] = @p34, [pickerUser] = @p35, [pickingEndTime] = @p36, [pickingStartTime] = @p37, [processBy] = @p38, [skuId] = @p39
WHERE [reserveId] = @p40;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p41, [boxQRCode] = @p42, [dateProcess] = @p43, [deductedStock2017] = @p44, [deductedStockEcom] = @p45, [isFreeItem] = @p46, [isFromNIB] = @p47, [isNIB] = @p48, [module] = @p49, [orderId] = @p50, [pickerStatus] = @p51, [pickerUser] = @p52, [pickingEndTime] = @p53, [pickingStartTime] = @p54, [processBy] = @p55, [skuId] = @p56
WHERE [reserveId] = @p57;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p58, [boxQRCode] = @p59, [dateProcess] = @p60, [deductedStock2017] = @p61, [deductedStockEcom] = @p62, [isFreeItem] = @p63, [isFromNIB] = @p64, [isNIB] = @p65, [module] = @p66, [orderId] = @p67, [pickerStatus] = @p68, [pickerUser] = @p69, [pickingEndTime] = @p70, [pickingStartTime] = @p71, [processBy] = @p72, [skuId] = @p73
WHERE [reserveId] = @p74;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p75, [boxQRCode] = @p76, [dateProcess] = @p77, [deductedStock2017] = @p78, [deductedStockEcom] = @p79, [isFreeItem] = @p80, [isFromNIB] = @p81, [isNIB] = @p82, [module] = @p83, [orderId] = @p84, [pickerStatus] = @p85, [pickerUser] = @p86, [pickingEndTime] = @p87, [pickingStartTime] = @p88, [processBy] = @p89, [skuId] = @p90
WHERE [reserveId] = @p91;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p92, [boxQRCode] = @p93, [dateProcess] = @p94, [deductedStock2017] = @p95, [deductedStockEcom] = @p96, [isFreeItem] = @p97, [isFromNIB] = @p98, [isNIB] = @p99, [module] = @p100, [orderId] = @p101, [pickerStatus] = @p102, [pickerUser] = @p103, [pickingEndTime] = @p104, [pickingStartTime] = @p105, [processBy] = @p106, [skuId] = @p107
WHERE [reserveId] = @p108;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p109, [boxQRCode] = @p110, [dateProcess] = @p111, [deductedStock2017] = @p112, [deductedStockEcom] = @p113, [isFreeItem] = @p114, [isFromNIB] = @p115, [isNIB] = @p116, [module] = @p117, [orderId] = @p118, [pickerStatus] = @p119, [pickerUser] = @p120, [pickingEndTime] = @p121, [pickingStartTime] = @p122, [processBy] = @p123, [skuId] = @p124
WHERE [reserveId] = @p125;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p126, [boxQRCode] = @p127, [dateProcess] = @p128, [deductedStock2017] = @p129, [deductedStockEcom] = @p130, [isFreeItem] = @p131, [isFromNIB] = @p132, [isNIB] = @p133, [module] = @p134, [orderId] = @p135, [pickerStatus] = @p136, [pickerUser] = @p137, [pickingEndTime] = @p138, [pickingStartTime] = @p139, [processBy] = @p140, [skuId] = @p141
WHERE [reserveId] = @p142;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p143, [boxQRCode] = @p144, [dateProcess] = @p145, [deductedStock2017] = @p146, [deductedStockEcom] = @p147, [isFreeItem] = @p148, [isFromNIB] = @p149, [isNIB] = @p150, [module] = @p151, [orderId] = @p152, [pickerStatus] = @p153, [pickerUser] = @p154, [pickingEndTime] = @p155, [pickingStartTime] = @p156, [processBy] = @p157, [skuId] = @p158
WHERE [reserveId] = @p159;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p160, [boxQRCode] = @p161, [dateProcess] = @p162, [deductedStock2017] = @p163, [deductedStockEcom] = @p164, [isFreeItem] = @p165, [isFromNIB] = @p166, [isNIB] = @p167, [module] = @p168, [orderId] = @p169, [pickerStatus] = @p170, [pickerUser] = @p171, [pickingEndTime] = @p172, [pickingStartTime] = @p173, [processBy] = @p174, [skuId] = @p175
WHERE [reserveId] = @p176;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p177, [boxQRCode] = @p178, [dateProcess] = @p179, [deductedStock2017] = @p180, [deductedStockEcom] = @p181, [isFreeItem] = @p182, [isFromNIB] = @p183, [isNIB] = @p184, [module] = @p185, [orderId] = @p186, [pickerStatus] = @p187, [pickerUser] = @p188, [pickingEndTime] = @p189, [pickingStartTime] = @p190, [processBy] = @p191, [skuId] = @p192
WHERE [reserveId] = @p193;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p194, [boxQRCode] = @p195, [dateProcess] = @p196, [deductedStock2017] = @p197, [deductedStockEcom] = @p198, [isFreeItem] = @p199, [isFromNIB] = @p200, [isNIB] = @p201, [module] = @p202, [orderId] = @p203, [pickerStatus] = @p204, [pickerUser] = @p205, [pickingEndTime] = @p206, [pickingStartTime] = @p207, [processBy] = @p208, [skuId] = @p209
WHERE [reserveId] = @p210;
SELECT @@ROWCOUNT;
2024-02-14 15:59:34.850 [ERR] An exception occurred in the database while saving changes for context type 'SNR_BGC.Models.UserClass'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The column "referenceNo" cannot be modified because it is either a computed column or is the result of a UNION operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:f643e3b9-7d7f-449b-bbda-8cd806273157
Error Number:271,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The column "referenceNo" cannot be modified because it is either a computed column or is the result of a UNION operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:f643e3b9-7d7f-449b-bbda-8cd806273157
Error Number:271,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-02-14 16:03:58.943 [ERR] Failed executing DbCommand (42ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p13='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (DbType = Int32), @p40='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (DbType = DateTime2), @p27='?' (DbType = Decimal), @p28='?' (DbType = Decimal), @p29='?' (DbType = Boolean), @p30='?' (DbType = Boolean), @p31='?' (DbType = Boolean), @p32='?' (Size = 4000), @p33='?' (Size = 4000), @p34='?' (Size = 4000), @p35='?' (Size = 4000), @p36='?' (DbType = DateTime2), @p37='?' (DbType = DateTime2), @p38='?' (Size = 4000), @p39='?' (Size = 4000), @p57='?' (DbType = Int32), @p41='?' (Size = 4000), @p42='?' (Size = 4000), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Decimal), @p45='?' (DbType = Decimal), @p46='?' (DbType = Boolean), @p47='?' (DbType = Boolean), @p48='?' (DbType = Boolean), @p49='?' (Size = 4000), @p50='?' (Size = 4000), @p51='?' (Size = 4000), @p52='?' (Size = 4000), @p53='?' (DbType = DateTime2), @p54='?' (DbType = DateTime2), @p55='?' (Size = 4000), @p56='?' (Size = 4000), @p74='?' (DbType = Int32), @p58='?' (Size = 4000), @p59='?' (Size = 4000), @p60='?' (DbType = DateTime2), @p61='?' (DbType = Decimal), @p62='?' (DbType = Decimal), @p63='?' (DbType = Boolean), @p64='?' (DbType = Boolean), @p65='?' (DbType = Boolean), @p66='?' (Size = 4000), @p67='?' (Size = 4000), @p68='?' (Size = 4000), @p69='?' (Size = 4000), @p70='?' (DbType = DateTime2), @p71='?' (DbType = DateTime2), @p72='?' (Size = 4000), @p73='?' (Size = 4000), @p91='?' (DbType = Int32), @p75='?' (Size = 4000), @p76='?' (Size = 4000), @p77='?' (DbType = DateTime2), @p78='?' (DbType = Decimal), @p79='?' (DbType = Decimal), @p80='?' (DbType = Boolean), @p81='?' (DbType = Boolean), @p82='?' (DbType = Boolean), @p83='?' (Size = 4000), @p84='?' (Size = 4000), @p85='?' (Size = 4000), @p86='?' (Size = 4000), @p87='?' (DbType = DateTime2), @p88='?' (DbType = DateTime2), @p89='?' (Size = 4000), @p90='?' (Size = 4000), @p108='?' (DbType = Int32), @p92='?' (Size = 4000), @p93='?' (Size = 4000), @p94='?' (DbType = DateTime2), @p95='?' (DbType = Decimal), @p96='?' (DbType = Decimal), @p97='?' (DbType = Boolean), @p98='?' (DbType = Boolean), @p99='?' (DbType = Boolean), @p100='?' (Size = 4000), @p101='?' (Size = 4000), @p102='?' (Size = 4000), @p103='?' (Size = 4000), @p104='?' (DbType = DateTime2), @p105='?' (DbType = DateTime2), @p106='?' (Size = 4000), @p107='?' (Size = 4000), @p125='?' (DbType = Int32), @p109='?' (Size = 4000), @p110='?' (Size = 4000), @p111='?' (DbType = DateTime2), @p112='?' (DbType = Decimal), @p113='?' (DbType = Decimal), @p114='?' (DbType = Boolean), @p115='?' (DbType = Boolean), @p116='?' (DbType = Boolean), @p117='?' (Size = 4000), @p118='?' (Size = 4000), @p119='?' (Size = 4000), @p120='?' (Size = 4000), @p121='?' (DbType = DateTime2), @p122='?' (DbType = DateTime2), @p123='?' (Size = 4000), @p124='?' (Size = 4000), @p142='?' (DbType = Int32), @p126='?' (Size = 4000), @p127='?' (Size = 4000), @p128='?' (DbType = DateTime2), @p129='?' (DbType = Decimal), @p130='?' (DbType = Decimal), @p131='?' (DbType = Boolean), @p132='?' (DbType = Boolean), @p133='?' (DbType = Boolean), @p134='?' (Size = 4000), @p135='?' (Size = 4000), @p136='?' (Size = 4000), @p137='?' (Size = 4000), @p138='?' (DbType = DateTime2), @p139='?' (DbType = DateTime2), @p140='?' (Size = 4000), @p141='?' (Size = 4000), @p159='?' (DbType = Int32), @p143='?' (Size = 4000), @p144='?' (Size = 4000), @p145='?' (DbType = DateTime2), @p146='?' (DbType = Decimal), @p147='?' (DbType = Decimal), @p148='?' (DbType = Boolean), @p149='?' (DbType = Boolean), @p150='?' (DbType = Boolean), @p151='?' (Size = 4000), @p152='?' (Size = 4000), @p153='?' (Size = 4000), @p154='?' (Size = 4000), @p155='?' (DbType = DateTime2), @p156='?' (DbType = DateTime2), @p157='?' (Size = 4000), @p158='?' (Size = 4000), @p176='?' (DbType = Int32), @p160='?' (Size = 4000), @p161='?' (Size = 4000), @p162='?' (DbType = DateTime2), @p163='?' (DbType = Decimal), @p164='?' (DbType = Decimal), @p165='?' (DbType = Boolean), @p166='?' (DbType = Boolean), @p167='?' (DbType = Boolean), @p168='?' (Size = 4000), @p169='?' (Size = 4000), @p170='?' (Size = 4000), @p171='?' (Size = 4000), @p172='?' (DbType = DateTime2), @p173='?' (DbType = DateTime2), @p174='?' (Size = 4000), @p175='?' (Size = 4000), @p193='?' (DbType = Int32), @p177='?' (Size = 4000), @p178='?' (Size = 4000), @p179='?' (DbType = DateTime2), @p180='?' (DbType = Decimal), @p181='?' (DbType = Decimal), @p182='?' (DbType = Boolean), @p183='?' (DbType = Boolean), @p184='?' (DbType = Boolean), @p185='?' (Size = 4000), @p186='?' (Size = 4000), @p187='?' (Size = 4000), @p188='?' (Size = 4000), @p189='?' (DbType = DateTime2), @p190='?' (DbType = DateTime2), @p191='?' (Size = 4000), @p192='?' (Size = 4000), @p210='?' (DbType = Int32), @p194='?' (Size = 4000), @p195='?' (Size = 4000), @p196='?' (DbType = DateTime2), @p197='?' (DbType = Decimal), @p198='?' (DbType = Decimal), @p199='?' (DbType = Boolean), @p200='?' (DbType = Boolean), @p201='?' (DbType = Boolean), @p202='?' (Size = 4000), @p203='?' (Size = 4000), @p204='?' (Size = 4000), @p205='?' (Size = 4000), @p206='?' (DbType = DateTime2), @p207='?' (DbType = DateTime2), @p208='?' (Size = 4000), @p209='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DiscrepancyOrders] ([boxId], [createdBy], [dateCreated], [module], [orderId], [referenceNo], [skuId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [id]
FROM [DiscrepancyOrders]
WHERE @@ROWCOUNT = 1 AND [id] = scope_identity();

UPDATE [DiscrepancyReportHdr] SET [boxerUser] = @p7, [dateProcess] = @p8, [orderId] = @p9, [pickerUser] = @p10, [referenceNo] = @p11, [status] = @p12
WHERE [discrepancyId] = @p13;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p14;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p15;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p16;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p17;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p18;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p19;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p20;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p21;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p22;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p23;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p24, [boxQRCode] = @p25, [dateProcess] = @p26, [deductedStock2017] = @p27, [deductedStockEcom] = @p28, [isFreeItem] = @p29, [isFromNIB] = @p30, [isNIB] = @p31, [module] = @p32, [orderId] = @p33, [pickerStatus] = @p34, [pickerUser] = @p35, [pickingEndTime] = @p36, [pickingStartTime] = @p37, [processBy] = @p38, [skuId] = @p39
WHERE [reserveId] = @p40;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p41, [boxQRCode] = @p42, [dateProcess] = @p43, [deductedStock2017] = @p44, [deductedStockEcom] = @p45, [isFreeItem] = @p46, [isFromNIB] = @p47, [isNIB] = @p48, [module] = @p49, [orderId] = @p50, [pickerStatus] = @p51, [pickerUser] = @p52, [pickingEndTime] = @p53, [pickingStartTime] = @p54, [processBy] = @p55, [skuId] = @p56
WHERE [reserveId] = @p57;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p58, [boxQRCode] = @p59, [dateProcess] = @p60, [deductedStock2017] = @p61, [deductedStockEcom] = @p62, [isFreeItem] = @p63, [isFromNIB] = @p64, [isNIB] = @p65, [module] = @p66, [orderId] = @p67, [pickerStatus] = @p68, [pickerUser] = @p69, [pickingEndTime] = @p70, [pickingStartTime] = @p71, [processBy] = @p72, [skuId] = @p73
WHERE [reserveId] = @p74;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p75, [boxQRCode] = @p76, [dateProcess] = @p77, [deductedStock2017] = @p78, [deductedStockEcom] = @p79, [isFreeItem] = @p80, [isFromNIB] = @p81, [isNIB] = @p82, [module] = @p83, [orderId] = @p84, [pickerStatus] = @p85, [pickerUser] = @p86, [pickingEndTime] = @p87, [pickingStartTime] = @p88, [processBy] = @p89, [skuId] = @p90
WHERE [reserveId] = @p91;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p92, [boxQRCode] = @p93, [dateProcess] = @p94, [deductedStock2017] = @p95, [deductedStockEcom] = @p96, [isFreeItem] = @p97, [isFromNIB] = @p98, [isNIB] = @p99, [module] = @p100, [orderId] = @p101, [pickerStatus] = @p102, [pickerUser] = @p103, [pickingEndTime] = @p104, [pickingStartTime] = @p105, [processBy] = @p106, [skuId] = @p107
WHERE [reserveId] = @p108;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p109, [boxQRCode] = @p110, [dateProcess] = @p111, [deductedStock2017] = @p112, [deductedStockEcom] = @p113, [isFreeItem] = @p114, [isFromNIB] = @p115, [isNIB] = @p116, [module] = @p117, [orderId] = @p118, [pickerStatus] = @p119, [pickerUser] = @p120, [pickingEndTime] = @p121, [pickingStartTime] = @p122, [processBy] = @p123, [skuId] = @p124
WHERE [reserveId] = @p125;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p126, [boxQRCode] = @p127, [dateProcess] = @p128, [deductedStock2017] = @p129, [deductedStockEcom] = @p130, [isFreeItem] = @p131, [isFromNIB] = @p132, [isNIB] = @p133, [module] = @p134, [orderId] = @p135, [pickerStatus] = @p136, [pickerUser] = @p137, [pickingEndTime] = @p138, [pickingStartTime] = @p139, [processBy] = @p140, [skuId] = @p141
WHERE [reserveId] = @p142;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p143, [boxQRCode] = @p144, [dateProcess] = @p145, [deductedStock2017] = @p146, [deductedStockEcom] = @p147, [isFreeItem] = @p148, [isFromNIB] = @p149, [isNIB] = @p150, [module] = @p151, [orderId] = @p152, [pickerStatus] = @p153, [pickerUser] = @p154, [pickingEndTime] = @p155, [pickingStartTime] = @p156, [processBy] = @p157, [skuId] = @p158
WHERE [reserveId] = @p159;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p160, [boxQRCode] = @p161, [dateProcess] = @p162, [deductedStock2017] = @p163, [deductedStockEcom] = @p164, [isFreeItem] = @p165, [isFromNIB] = @p166, [isNIB] = @p167, [module] = @p168, [orderId] = @p169, [pickerStatus] = @p170, [pickerUser] = @p171, [pickingEndTime] = @p172, [pickingStartTime] = @p173, [processBy] = @p174, [skuId] = @p175
WHERE [reserveId] = @p176;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p177, [boxQRCode] = @p178, [dateProcess] = @p179, [deductedStock2017] = @p180, [deductedStockEcom] = @p181, [isFreeItem] = @p182, [isFromNIB] = @p183, [isNIB] = @p184, [module] = @p185, [orderId] = @p186, [pickerStatus] = @p187, [pickerUser] = @p188, [pickingEndTime] = @p189, [pickingStartTime] = @p190, [processBy] = @p191, [skuId] = @p192
WHERE [reserveId] = @p193;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p194, [boxQRCode] = @p195, [dateProcess] = @p196, [deductedStock2017] = @p197, [deductedStockEcom] = @p198, [isFreeItem] = @p199, [isFromNIB] = @p200, [isNIB] = @p201, [module] = @p202, [orderId] = @p203, [pickerStatus] = @p204, [pickerUser] = @p205, [pickingEndTime] = @p206, [pickingStartTime] = @p207, [processBy] = @p208, [skuId] = @p209
WHERE [reserveId] = @p210;
SELECT @@ROWCOUNT;
2024-02-14 16:03:58.974 [ERR] An exception occurred in the database while saving changes for context type 'SNR_BGC.Models.UserClass'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The column "referenceNo" cannot be modified because it is either a computed column or is the result of a UNION operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:f643e3b9-7d7f-449b-bbda-8cd806273157
Error Number:271,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The column "referenceNo" cannot be modified because it is either a computed column or is the result of a UNION operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:f643e3b9-7d7f-449b-bbda-8cd806273157
Error Number:271,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-02-14 16:05:43.724 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SNR_BGC.Controllers.DiscrepancyCenterController.SaveDiscrepancy(String order_id, String referenceNo)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2024-02-14 16:05:52.225 [ERR] Failed executing DbCommand (61ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p13='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (DbType = Int32), @p40='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (DbType = DateTime2), @p27='?' (DbType = Decimal), @p28='?' (DbType = Decimal), @p29='?' (DbType = Boolean), @p30='?' (DbType = Boolean), @p31='?' (DbType = Boolean), @p32='?' (Size = 4000), @p33='?' (Size = 4000), @p34='?' (Size = 4000), @p35='?' (Size = 4000), @p36='?' (DbType = DateTime2), @p37='?' (DbType = DateTime2), @p38='?' (Size = 4000), @p39='?' (Size = 4000), @p57='?' (DbType = Int32), @p41='?' (Size = 4000), @p42='?' (Size = 4000), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Decimal), @p45='?' (DbType = Decimal), @p46='?' (DbType = Boolean), @p47='?' (DbType = Boolean), @p48='?' (DbType = Boolean), @p49='?' (Size = 4000), @p50='?' (Size = 4000), @p51='?' (Size = 4000), @p52='?' (Size = 4000), @p53='?' (DbType = DateTime2), @p54='?' (DbType = DateTime2), @p55='?' (Size = 4000), @p56='?' (Size = 4000), @p74='?' (DbType = Int32), @p58='?' (Size = 4000), @p59='?' (Size = 4000), @p60='?' (DbType = DateTime2), @p61='?' (DbType = Decimal), @p62='?' (DbType = Decimal), @p63='?' (DbType = Boolean), @p64='?' (DbType = Boolean), @p65='?' (DbType = Boolean), @p66='?' (Size = 4000), @p67='?' (Size = 4000), @p68='?' (Size = 4000), @p69='?' (Size = 4000), @p70='?' (DbType = DateTime2), @p71='?' (DbType = DateTime2), @p72='?' (Size = 4000), @p73='?' (Size = 4000), @p91='?' (DbType = Int32), @p75='?' (Size = 4000), @p76='?' (Size = 4000), @p77='?' (DbType = DateTime2), @p78='?' (DbType = Decimal), @p79='?' (DbType = Decimal), @p80='?' (DbType = Boolean), @p81='?' (DbType = Boolean), @p82='?' (DbType = Boolean), @p83='?' (Size = 4000), @p84='?' (Size = 4000), @p85='?' (Size = 4000), @p86='?' (Size = 4000), @p87='?' (DbType = DateTime2), @p88='?' (DbType = DateTime2), @p89='?' (Size = 4000), @p90='?' (Size = 4000), @p108='?' (DbType = Int32), @p92='?' (Size = 4000), @p93='?' (Size = 4000), @p94='?' (DbType = DateTime2), @p95='?' (DbType = Decimal), @p96='?' (DbType = Decimal), @p97='?' (DbType = Boolean), @p98='?' (DbType = Boolean), @p99='?' (DbType = Boolean), @p100='?' (Size = 4000), @p101='?' (Size = 4000), @p102='?' (Size = 4000), @p103='?' (Size = 4000), @p104='?' (DbType = DateTime2), @p105='?' (DbType = DateTime2), @p106='?' (Size = 4000), @p107='?' (Size = 4000), @p125='?' (DbType = Int32), @p109='?' (Size = 4000), @p110='?' (Size = 4000), @p111='?' (DbType = DateTime2), @p112='?' (DbType = Decimal), @p113='?' (DbType = Decimal), @p114='?' (DbType = Boolean), @p115='?' (DbType = Boolean), @p116='?' (DbType = Boolean), @p117='?' (Size = 4000), @p118='?' (Size = 4000), @p119='?' (Size = 4000), @p120='?' (Size = 4000), @p121='?' (DbType = DateTime2), @p122='?' (DbType = DateTime2), @p123='?' (Size = 4000), @p124='?' (Size = 4000), @p142='?' (DbType = Int32), @p126='?' (Size = 4000), @p127='?' (Size = 4000), @p128='?' (DbType = DateTime2), @p129='?' (DbType = Decimal), @p130='?' (DbType = Decimal), @p131='?' (DbType = Boolean), @p132='?' (DbType = Boolean), @p133='?' (DbType = Boolean), @p134='?' (Size = 4000), @p135='?' (Size = 4000), @p136='?' (Size = 4000), @p137='?' (Size = 4000), @p138='?' (DbType = DateTime2), @p139='?' (DbType = DateTime2), @p140='?' (Size = 4000), @p141='?' (Size = 4000), @p159='?' (DbType = Int32), @p143='?' (Size = 4000), @p144='?' (Size = 4000), @p145='?' (DbType = DateTime2), @p146='?' (DbType = Decimal), @p147='?' (DbType = Decimal), @p148='?' (DbType = Boolean), @p149='?' (DbType = Boolean), @p150='?' (DbType = Boolean), @p151='?' (Size = 4000), @p152='?' (Size = 4000), @p153='?' (Size = 4000), @p154='?' (Size = 4000), @p155='?' (DbType = DateTime2), @p156='?' (DbType = DateTime2), @p157='?' (Size = 4000), @p158='?' (Size = 4000), @p176='?' (DbType = Int32), @p160='?' (Size = 4000), @p161='?' (Size = 4000), @p162='?' (DbType = DateTime2), @p163='?' (DbType = Decimal), @p164='?' (DbType = Decimal), @p165='?' (DbType = Boolean), @p166='?' (DbType = Boolean), @p167='?' (DbType = Boolean), @p168='?' (Size = 4000), @p169='?' (Size = 4000), @p170='?' (Size = 4000), @p171='?' (Size = 4000), @p172='?' (DbType = DateTime2), @p173='?' (DbType = DateTime2), @p174='?' (Size = 4000), @p175='?' (Size = 4000), @p193='?' (DbType = Int32), @p177='?' (Size = 4000), @p178='?' (Size = 4000), @p179='?' (DbType = DateTime2), @p180='?' (DbType = Decimal), @p181='?' (DbType = Decimal), @p182='?' (DbType = Boolean), @p183='?' (DbType = Boolean), @p184='?' (DbType = Boolean), @p185='?' (Size = 4000), @p186='?' (Size = 4000), @p187='?' (Size = 4000), @p188='?' (Size = 4000), @p189='?' (DbType = DateTime2), @p190='?' (DbType = DateTime2), @p191='?' (Size = 4000), @p192='?' (Size = 4000), @p210='?' (DbType = Int32), @p194='?' (Size = 4000), @p195='?' (Size = 4000), @p196='?' (DbType = DateTime2), @p197='?' (DbType = Decimal), @p198='?' (DbType = Decimal), @p199='?' (DbType = Boolean), @p200='?' (DbType = Boolean), @p201='?' (DbType = Boolean), @p202='?' (Size = 4000), @p203='?' (Size = 4000), @p204='?' (Size = 4000), @p205='?' (Size = 4000), @p206='?' (DbType = DateTime2), @p207='?' (DbType = DateTime2), @p208='?' (Size = 4000), @p209='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DiscrepancyOrders] ([boxId], [createdBy], [dateCreated], [module], [orderId], [referenceNo], [skuId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [id]
FROM [DiscrepancyOrders]
WHERE @@ROWCOUNT = 1 AND [id] = scope_identity();

UPDATE [DiscrepancyReportHdr] SET [boxerUser] = @p7, [dateProcess] = @p8, [orderId] = @p9, [pickerUser] = @p10, [referenceNo] = @p11, [status] = @p12
WHERE [discrepancyId] = @p13;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p14;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p15;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p16;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p17;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p18;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p19;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p20;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p21;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p22;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p23;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p24, [boxQRCode] = @p25, [dateProcess] = @p26, [deductedStock2017] = @p27, [deductedStockEcom] = @p28, [isFreeItem] = @p29, [isFromNIB] = @p30, [isNIB] = @p31, [module] = @p32, [orderId] = @p33, [pickerStatus] = @p34, [pickerUser] = @p35, [pickingEndTime] = @p36, [pickingStartTime] = @p37, [processBy] = @p38, [skuId] = @p39
WHERE [reserveId] = @p40;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p41, [boxQRCode] = @p42, [dateProcess] = @p43, [deductedStock2017] = @p44, [deductedStockEcom] = @p45, [isFreeItem] = @p46, [isFromNIB] = @p47, [isNIB] = @p48, [module] = @p49, [orderId] = @p50, [pickerStatus] = @p51, [pickerUser] = @p52, [pickingEndTime] = @p53, [pickingStartTime] = @p54, [processBy] = @p55, [skuId] = @p56
WHERE [reserveId] = @p57;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p58, [boxQRCode] = @p59, [dateProcess] = @p60, [deductedStock2017] = @p61, [deductedStockEcom] = @p62, [isFreeItem] = @p63, [isFromNIB] = @p64, [isNIB] = @p65, [module] = @p66, [orderId] = @p67, [pickerStatus] = @p68, [pickerUser] = @p69, [pickingEndTime] = @p70, [pickingStartTime] = @p71, [processBy] = @p72, [skuId] = @p73
WHERE [reserveId] = @p74;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p75, [boxQRCode] = @p76, [dateProcess] = @p77, [deductedStock2017] = @p78, [deductedStockEcom] = @p79, [isFreeItem] = @p80, [isFromNIB] = @p81, [isNIB] = @p82, [module] = @p83, [orderId] = @p84, [pickerStatus] = @p85, [pickerUser] = @p86, [pickingEndTime] = @p87, [pickingStartTime] = @p88, [processBy] = @p89, [skuId] = @p90
WHERE [reserveId] = @p91;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p92, [boxQRCode] = @p93, [dateProcess] = @p94, [deductedStock2017] = @p95, [deductedStockEcom] = @p96, [isFreeItem] = @p97, [isFromNIB] = @p98, [isNIB] = @p99, [module] = @p100, [orderId] = @p101, [pickerStatus] = @p102, [pickerUser] = @p103, [pickingEndTime] = @p104, [pickingStartTime] = @p105, [processBy] = @p106, [skuId] = @p107
WHERE [reserveId] = @p108;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p109, [boxQRCode] = @p110, [dateProcess] = @p111, [deductedStock2017] = @p112, [deductedStockEcom] = @p113, [isFreeItem] = @p114, [isFromNIB] = @p115, [isNIB] = @p116, [module] = @p117, [orderId] = @p118, [pickerStatus] = @p119, [pickerUser] = @p120, [pickingEndTime] = @p121, [pickingStartTime] = @p122, [processBy] = @p123, [skuId] = @p124
WHERE [reserveId] = @p125;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p126, [boxQRCode] = @p127, [dateProcess] = @p128, [deductedStock2017] = @p129, [deductedStockEcom] = @p130, [isFreeItem] = @p131, [isFromNIB] = @p132, [isNIB] = @p133, [module] = @p134, [orderId] = @p135, [pickerStatus] = @p136, [pickerUser] = @p137, [pickingEndTime] = @p138, [pickingStartTime] = @p139, [processBy] = @p140, [skuId] = @p141
WHERE [reserveId] = @p142;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p143, [boxQRCode] = @p144, [dateProcess] = @p145, [deductedStock2017] = @p146, [deductedStockEcom] = @p147, [isFreeItem] = @p148, [isFromNIB] = @p149, [isNIB] = @p150, [module] = @p151, [orderId] = @p152, [pickerStatus] = @p153, [pickerUser] = @p154, [pickingEndTime] = @p155, [pickingStartTime] = @p156, [processBy] = @p157, [skuId] = @p158
WHERE [reserveId] = @p159;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p160, [boxQRCode] = @p161, [dateProcess] = @p162, [deductedStock2017] = @p163, [deductedStockEcom] = @p164, [isFreeItem] = @p165, [isFromNIB] = @p166, [isNIB] = @p167, [module] = @p168, [orderId] = @p169, [pickerStatus] = @p170, [pickerUser] = @p171, [pickingEndTime] = @p172, [pickingStartTime] = @p173, [processBy] = @p174, [skuId] = @p175
WHERE [reserveId] = @p176;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p177, [boxQRCode] = @p178, [dateProcess] = @p179, [deductedStock2017] = @p180, [deductedStockEcom] = @p181, [isFreeItem] = @p182, [isFromNIB] = @p183, [isNIB] = @p184, [module] = @p185, [orderId] = @p186, [pickerStatus] = @p187, [pickerUser] = @p188, [pickingEndTime] = @p189, [pickingStartTime] = @p190, [processBy] = @p191, [skuId] = @p192
WHERE [reserveId] = @p193;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p194, [boxQRCode] = @p195, [dateProcess] = @p196, [deductedStock2017] = @p197, [deductedStockEcom] = @p198, [isFreeItem] = @p199, [isFromNIB] = @p200, [isNIB] = @p201, [module] = @p202, [orderId] = @p203, [pickerStatus] = @p204, [pickerUser] = @p205, [pickingEndTime] = @p206, [pickingStartTime] = @p207, [processBy] = @p208, [skuId] = @p209
WHERE [reserveId] = @p210;
SELECT @@ROWCOUNT;
2024-02-14 16:05:52.246 [ERR] An exception occurred in the database while saving changes for context type 'SNR_BGC.Models.UserClass'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The column "referenceNo" cannot be modified because it is either a computed column or is the result of a UNION operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:f643e3b9-7d7f-449b-bbda-8cd806273157
Error Number:271,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The column "referenceNo" cannot be modified because it is either a computed column or is the result of a UNION operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:f643e3b9-7d7f-449b-bbda-8cd806273157
Error Number:271,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-02-14 16:26:33.049 [ERR] Failed executing DbCommand (48ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p13='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (DbType = Int32), @p40='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (Size = 4000), @p26='?' (DbType = DateTime2), @p27='?' (DbType = Decimal), @p28='?' (DbType = Decimal), @p29='?' (DbType = Boolean), @p30='?' (DbType = Boolean), @p31='?' (DbType = Boolean), @p32='?' (Size = 4000), @p33='?' (Size = 4000), @p34='?' (Size = 4000), @p35='?' (Size = 4000), @p36='?' (DbType = DateTime2), @p37='?' (DbType = DateTime2), @p38='?' (Size = 4000), @p39='?' (Size = 4000), @p57='?' (DbType = Int32), @p41='?' (Size = 4000), @p42='?' (Size = 4000), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Decimal), @p45='?' (DbType = Decimal), @p46='?' (DbType = Boolean), @p47='?' (DbType = Boolean), @p48='?' (DbType = Boolean), @p49='?' (Size = 4000), @p50='?' (Size = 4000), @p51='?' (Size = 4000), @p52='?' (Size = 4000), @p53='?' (DbType = DateTime2), @p54='?' (DbType = DateTime2), @p55='?' (Size = 4000), @p56='?' (Size = 4000), @p74='?' (DbType = Int32), @p58='?' (Size = 4000), @p59='?' (Size = 4000), @p60='?' (DbType = DateTime2), @p61='?' (DbType = Decimal), @p62='?' (DbType = Decimal), @p63='?' (DbType = Boolean), @p64='?' (DbType = Boolean), @p65='?' (DbType = Boolean), @p66='?' (Size = 4000), @p67='?' (Size = 4000), @p68='?' (Size = 4000), @p69='?' (Size = 4000), @p70='?' (DbType = DateTime2), @p71='?' (DbType = DateTime2), @p72='?' (Size = 4000), @p73='?' (Size = 4000), @p91='?' (DbType = Int32), @p75='?' (Size = 4000), @p76='?' (Size = 4000), @p77='?' (DbType = DateTime2), @p78='?' (DbType = Decimal), @p79='?' (DbType = Decimal), @p80='?' (DbType = Boolean), @p81='?' (DbType = Boolean), @p82='?' (DbType = Boolean), @p83='?' (Size = 4000), @p84='?' (Size = 4000), @p85='?' (Size = 4000), @p86='?' (Size = 4000), @p87='?' (DbType = DateTime2), @p88='?' (DbType = DateTime2), @p89='?' (Size = 4000), @p90='?' (Size = 4000), @p108='?' (DbType = Int32), @p92='?' (Size = 4000), @p93='?' (Size = 4000), @p94='?' (DbType = DateTime2), @p95='?' (DbType = Decimal), @p96='?' (DbType = Decimal), @p97='?' (DbType = Boolean), @p98='?' (DbType = Boolean), @p99='?' (DbType = Boolean), @p100='?' (Size = 4000), @p101='?' (Size = 4000), @p102='?' (Size = 4000), @p103='?' (Size = 4000), @p104='?' (DbType = DateTime2), @p105='?' (DbType = DateTime2), @p106='?' (Size = 4000), @p107='?' (Size = 4000), @p125='?' (DbType = Int32), @p109='?' (Size = 4000), @p110='?' (Size = 4000), @p111='?' (DbType = DateTime2), @p112='?' (DbType = Decimal), @p113='?' (DbType = Decimal), @p114='?' (DbType = Boolean), @p115='?' (DbType = Boolean), @p116='?' (DbType = Boolean), @p117='?' (Size = 4000), @p118='?' (Size = 4000), @p119='?' (Size = 4000), @p120='?' (Size = 4000), @p121='?' (DbType = DateTime2), @p122='?' (DbType = DateTime2), @p123='?' (Size = 4000), @p124='?' (Size = 4000), @p142='?' (DbType = Int32), @p126='?' (Size = 4000), @p127='?' (Size = 4000), @p128='?' (DbType = DateTime2), @p129='?' (DbType = Decimal), @p130='?' (DbType = Decimal), @p131='?' (DbType = Boolean), @p132='?' (DbType = Boolean), @p133='?' (DbType = Boolean), @p134='?' (Size = 4000), @p135='?' (Size = 4000), @p136='?' (Size = 4000), @p137='?' (Size = 4000), @p138='?' (DbType = DateTime2), @p139='?' (DbType = DateTime2), @p140='?' (Size = 4000), @p141='?' (Size = 4000), @p159='?' (DbType = Int32), @p143='?' (Size = 4000), @p144='?' (Size = 4000), @p145='?' (DbType = DateTime2), @p146='?' (DbType = Decimal), @p147='?' (DbType = Decimal), @p148='?' (DbType = Boolean), @p149='?' (DbType = Boolean), @p150='?' (DbType = Boolean), @p151='?' (Size = 4000), @p152='?' (Size = 4000), @p153='?' (Size = 4000), @p154='?' (Size = 4000), @p155='?' (DbType = DateTime2), @p156='?' (DbType = DateTime2), @p157='?' (Size = 4000), @p158='?' (Size = 4000), @p176='?' (DbType = Int32), @p160='?' (Size = 4000), @p161='?' (Size = 4000), @p162='?' (DbType = DateTime2), @p163='?' (DbType = Decimal), @p164='?' (DbType = Decimal), @p165='?' (DbType = Boolean), @p166='?' (DbType = Boolean), @p167='?' (DbType = Boolean), @p168='?' (Size = 4000), @p169='?' (Size = 4000), @p170='?' (Size = 4000), @p171='?' (Size = 4000), @p172='?' (DbType = DateTime2), @p173='?' (DbType = DateTime2), @p174='?' (Size = 4000), @p175='?' (Size = 4000), @p193='?' (DbType = Int32), @p177='?' (Size = 4000), @p178='?' (Size = 4000), @p179='?' (DbType = DateTime2), @p180='?' (DbType = Decimal), @p181='?' (DbType = Decimal), @p182='?' (DbType = Boolean), @p183='?' (DbType = Boolean), @p184='?' (DbType = Boolean), @p185='?' (Size = 4000), @p186='?' (Size = 4000), @p187='?' (Size = 4000), @p188='?' (Size = 4000), @p189='?' (DbType = DateTime2), @p190='?' (DbType = DateTime2), @p191='?' (Size = 4000), @p192='?' (Size = 4000), @p210='?' (DbType = Int32), @p194='?' (Size = 4000), @p195='?' (Size = 4000), @p196='?' (DbType = DateTime2), @p197='?' (DbType = Decimal), @p198='?' (DbType = Decimal), @p199='?' (DbType = Boolean), @p200='?' (DbType = Boolean), @p201='?' (DbType = Boolean), @p202='?' (Size = 4000), @p203='?' (Size = 4000), @p204='?' (Size = 4000), @p205='?' (Size = 4000), @p206='?' (DbType = DateTime2), @p207='?' (DbType = DateTime2), @p208='?' (Size = 4000), @p209='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DiscrepancyOrders] ([boxId], [createdBy], [dateCreated], [module], [orderId], [referenceNo], [skuId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [id]
FROM [DiscrepancyOrders]
WHERE @@ROWCOUNT = 1 AND [id] = scope_identity();

UPDATE [DiscrepancyReportHdr] SET [boxerUser] = @p7, [dateProcess] = @p8, [orderId] = @p9, [pickerUser] = @p10, [referenceNo] = @p11, [status] = @p12
WHERE [discrepancyId] = @p13;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p14;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p15;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p16;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p17;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p18;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p19;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p20;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p21;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p22;
SELECT @@ROWCOUNT;

DELETE FROM [boxOrders]
WHERE [boxId] = @p23;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p24, [boxQRCode] = @p25, [dateProcess] = @p26, [deductedStock2017] = @p27, [deductedStockEcom] = @p28, [isFreeItem] = @p29, [isFromNIB] = @p30, [isNIB] = @p31, [module] = @p32, [orderId] = @p33, [pickerStatus] = @p34, [pickerUser] = @p35, [pickingEndTime] = @p36, [pickingStartTime] = @p37, [processBy] = @p38, [skuId] = @p39
WHERE [reserveId] = @p40;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p41, [boxQRCode] = @p42, [dateProcess] = @p43, [deductedStock2017] = @p44, [deductedStockEcom] = @p45, [isFreeItem] = @p46, [isFromNIB] = @p47, [isNIB] = @p48, [module] = @p49, [orderId] = @p50, [pickerStatus] = @p51, [pickerUser] = @p52, [pickingEndTime] = @p53, [pickingStartTime] = @p54, [processBy] = @p55, [skuId] = @p56
WHERE [reserveId] = @p57;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p58, [boxQRCode] = @p59, [dateProcess] = @p60, [deductedStock2017] = @p61, [deductedStockEcom] = @p62, [isFreeItem] = @p63, [isFromNIB] = @p64, [isNIB] = @p65, [module] = @p66, [orderId] = @p67, [pickerStatus] = @p68, [pickerUser] = @p69, [pickingEndTime] = @p70, [pickingStartTime] = @p71, [processBy] = @p72, [skuId] = @p73
WHERE [reserveId] = @p74;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p75, [boxQRCode] = @p76, [dateProcess] = @p77, [deductedStock2017] = @p78, [deductedStockEcom] = @p79, [isFreeItem] = @p80, [isFromNIB] = @p81, [isNIB] = @p82, [module] = @p83, [orderId] = @p84, [pickerStatus] = @p85, [pickerUser] = @p86, [pickingEndTime] = @p87, [pickingStartTime] = @p88, [processBy] = @p89, [skuId] = @p90
WHERE [reserveId] = @p91;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p92, [boxQRCode] = @p93, [dateProcess] = @p94, [deductedStock2017] = @p95, [deductedStockEcom] = @p96, [isFreeItem] = @p97, [isFromNIB] = @p98, [isNIB] = @p99, [module] = @p100, [orderId] = @p101, [pickerStatus] = @p102, [pickerUser] = @p103, [pickingEndTime] = @p104, [pickingStartTime] = @p105, [processBy] = @p106, [skuId] = @p107
WHERE [reserveId] = @p108;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p109, [boxQRCode] = @p110, [dateProcess] = @p111, [deductedStock2017] = @p112, [deductedStockEcom] = @p113, [isFreeItem] = @p114, [isFromNIB] = @p115, [isNIB] = @p116, [module] = @p117, [orderId] = @p118, [pickerStatus] = @p119, [pickerUser] = @p120, [pickingEndTime] = @p121, [pickingStartTime] = @p122, [processBy] = @p123, [skuId] = @p124
WHERE [reserveId] = @p125;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p126, [boxQRCode] = @p127, [dateProcess] = @p128, [deductedStock2017] = @p129, [deductedStockEcom] = @p130, [isFreeItem] = @p131, [isFromNIB] = @p132, [isNIB] = @p133, [module] = @p134, [orderId] = @p135, [pickerStatus] = @p136, [pickerUser] = @p137, [pickingEndTime] = @p138, [pickingStartTime] = @p139, [processBy] = @p140, [skuId] = @p141
WHERE [reserveId] = @p142;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p143, [boxQRCode] = @p144, [dateProcess] = @p145, [deductedStock2017] = @p146, [deductedStockEcom] = @p147, [isFreeItem] = @p148, [isFromNIB] = @p149, [isNIB] = @p150, [module] = @p151, [orderId] = @p152, [pickerStatus] = @p153, [pickerUser] = @p154, [pickingEndTime] = @p155, [pickingStartTime] = @p156, [processBy] = @p157, [skuId] = @p158
WHERE [reserveId] = @p159;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p160, [boxQRCode] = @p161, [dateProcess] = @p162, [deductedStock2017] = @p163, [deductedStockEcom] = @p164, [isFreeItem] = @p165, [isFromNIB] = @p166, [isNIB] = @p167, [module] = @p168, [orderId] = @p169, [pickerStatus] = @p170, [pickerUser] = @p171, [pickingEndTime] = @p172, [pickingStartTime] = @p173, [processBy] = @p174, [skuId] = @p175
WHERE [reserveId] = @p176;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p177, [boxQRCode] = @p178, [dateProcess] = @p179, [deductedStock2017] = @p180, [deductedStockEcom] = @p181, [isFreeItem] = @p182, [isFromNIB] = @p183, [isNIB] = @p184, [module] = @p185, [orderId] = @p186, [pickerStatus] = @p187, [pickerUser] = @p188, [pickingEndTime] = @p189, [pickingStartTime] = @p190, [processBy] = @p191, [skuId] = @p192
WHERE [reserveId] = @p193;
SELECT @@ROWCOUNT;

UPDATE [clearedOrders] SET [NIBUser] = @p194, [boxQRCode] = @p195, [dateProcess] = @p196, [deductedStock2017] = @p197, [deductedStockEcom] = @p198, [isFreeItem] = @p199, [isFromNIB] = @p200, [isNIB] = @p201, [module] = @p202, [orderId] = @p203, [pickerStatus] = @p204, [pickerUser] = @p205, [pickingEndTime] = @p206, [pickingStartTime] = @p207, [processBy] = @p208, [skuId] = @p209
WHERE [reserveId] = @p210;
SELECT @@ROWCOUNT;
2024-02-14 16:26:33.165 [ERR] An exception occurred in the database while saving changes for context type 'SNR_BGC.Models.UserClass'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The column "referenceNo" cannot be modified because it is either a computed column or is the result of a UNION operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:2fd8158f-261f-49c5-9b27-8992f8d6b9a3
Error Number:271,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The column "referenceNo" cannot be modified because it is either a computed column or is the result of a UNION operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:2fd8158f-261f-49c5-9b27-8992f8d6b9a3
Error Number:271,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
